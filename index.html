<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>SISTEMA NAVAL DE EVALUACI√ìN - ARMADA DEL ECUADOR</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <!-- ================= LOGIN ================= -->
    <div id="loginBox" style="

        position: fixed;
        inset: 0;
        background: linear-gradient(135deg, #001f3f, #003366);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 5000;
        ">

        <div style="
            background:white;
            padding:40px;
            border-radius:12px;
            width:380px;
            text-align:center;
            box-shadow:0 20px 40px rgba(0,0,0,.5);
        ">
            <h3 style="color:#001f3f">ARMADA DEL ECUADOR</h3>
            <p style="font-weight:bold; margin-top:-10px">COMANDANCIA DE LA ESCUADRA</p>

            <label>Usuario</label>
            <input id="loginUser" type="text">

            <label>Clave</label>
            <input id="loginPass" type="password">

            <button class="btn btn-main" onclick="login()">
                INGRESAR AL SISTEMA
            </button>
        </div>
    </div>

    <!-- ================= APLICACI√ìN PRINCIPAL ================= -->
    <div id="app" style="display:none;">

        <!-- TODO EL SISTEMA EXISTENTE -->


        <div class="sidebar">

            <!-- HEADER FIJO -->
            <div style="flex-shrink: 0; background: var(--navy); padding: 15px 15px 0 15px;">
                <!-- CONTENEDOR DEL LOGO -->
                <h2 style="
                    color: var(--gold); 
                    text-align: center; 
                    margin: 20px 0; 
                    font-weight: 900; 
                    font-size: 1.8em;
                    letter-spacing: 2px;
                    text-shadow: 0 2px 4px rgba(0,0,0,0.5);
                    text-transform: uppercase;
                ">ARMADA DEL ECUADOR</h2>

                <!-- CONTENEDOR DE ESTADO (FUERA DEL AREA DEL LOGO) -->
                <div id="syncIndicator" style="
                    padding: 10px;
                    background: rgba(255,255,255,0.05);
                    border: 2px solid var(--gold);
                    border-top: none;
                    border-radius: 12px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    gap: 10px;
                    margin-bottom: 15px;
                ">
                    <div id="syncDot" style="width:12px; height:12px; border-radius:50%; background:#718096;"></div>
                    <span id="syncText" style="font-weight: bold; color: white; font-size: 0.9em;">SIN VINCULAR</span>
                </div>

                <div style="margin-bottom: 20px;">
                    <button id="btnLinkSync" onclick="linkDatabaseFile()" style="
                        width: 100%;
                        padding: 12px;
                        background: var(--gold);
                        color: var(--navy);
                        border: none;
                        border-radius: 6px;
                        font-weight: 900;
                        cursor: pointer;
                        font-size: 0.85em;
                        text-transform: uppercase;
                        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
                        transition: 0.2s;
                    ">
                        üîó VINCULAR ONEDRIVE
                    </button>
                </div>
            </div>

            <!-- MENU DESLIZABLE -->
            <div class="menu-container" style="flex-grow: 1; overflow-y: auto;">
                <div class="menu-item" id="menuTactico" onclick="toggleSubmenu('subTactico')">T√ÅCTICO <span>‚ñº</span>
                </div>
                <div id="subTactico" class="submenu show">
                    <div class="submenu-item active" id="itemSuperficie"
                        onclick="showMainSection('tactico-superficie', this)">SUPERFICIE
                    </div>
                    <div class="submenu-item" id="itemSubmarinos" onclick="showMainSection('vacio', this)">SUBMARINOS
                    </div>
                    <div class="submenu-item" id="itemAviacion" onclick="showMainSection('vacio', this)">AVIACI√ìN NAVAL
                    </div>
                    <div class="submenu-item" id="itemInfanteria" onclick="showMainSection('vacio', this)">INFANTER√çA DE
                        MARINA
                    </div>
                    <div class="submenu-item" id="itemGuardacostas" onclick="showMainSection('vacio', this)">
                        GUARDACOSTAS
                    </div>
                </div>

                <div class="menu-item" id="menuOperacional" onclick="toggleSubmenu('subOperacional')">OPERACIONAL
                    <span>‚ñº</span>
                </div>
                <div id="subOperacional" class="submenu">
                    <div class="submenu-item" id="itemResumenIntegral"
                        onclick="showMainSection('operacional-resumen', this)"
                        style="color: var(--gold); font-weight: bold;">RESUMEN INTEGRAL</div>
                </div>

                <div class="menu-item" id="menuEstrategico" onclick="showMainSection('vacio', this)">ESTRAT√âGICO</div>
                <div class="menu-item" id="menuGestionDatos" onclick="showMainSection('admin-datos', this)"
                    style="color: var(--gold); border-top: 1px solid gold; margin-top: 10px;">üíæ GESTI√ìN DE DATOS</div>
                <div class="menu-item" id="menuCreditos" onclick="showMainSection('creditos', this)"
                    style="color: var(--gold); border-top: 1px solid gold;">‚ÑπÔ∏è AUTOR√çA / CR√âDITOS</div>

                <div class="menu-item" onclick="toggleSubmenu('subAdmin')"
                    style="color: var(--gold); border-top: 1px solid gold;">
                    ‚öôÔ∏è ADMINISTRADOR <span>‚ñº</span>
                </div>

                <div id="subAdmin" class="submenu">
                    <div class="submenu-item" onclick="showMainSection('admin-usuarios', this)">üë§ Usuarios</div>
                    <div class="submenu-item" onclick="showMainSection('admin-buques', this)">üö¢ Buques</div>
                    <div class="submenu-item" onclick="showMainSection('admin-bitacora', this)">üßæ Bit√°cora</div>
                </div>

            </div>

            <!-- BOT√ìN SALIR AL FINAL -->
            <div
                style="padding:15px; background: var(--navy); border-top: 1px solid rgba(255,255,255,0.1); flex-shrink: 0;">
                <button onclick="cerrarSesion()" style="
                    width:100%;
                    background:#c53030;
                    color:white;
                    border:none;
                    padding:12px;
                    cursor:pointer;
                    font-weight:bold;
                    border-radius: 6px;
                    text-transform: uppercase;
                    ">
                    SALIR DEL SISTEMA
                </button>
            </div>
        </div>



        <div class="main-content">
            <div class="container">

                <div id="tactico-superficie" class="tab-content active">
                    <h2 style="color: var(--navy);">EVALUACI√ìN T√ÅCTICA - FUERZA DE SUPERFICIE</h2>

                    <div class="internal-nav">
                        <div class="internal-link active" onclick="showInternalTab('liuntas', this)">1. MISI√ìN/TAREAS
                        </div>
                        <div class="internal-link" onclick="showInternalTab('ejercicios', this)">2. EJERCICIOS</div>
                        <div class="internal-link" onclick="showInternalTab('costos', this)">3. COSTOS</div>
                        <div class="internal-link" onclick="showInternalTab('eficacia', this)">4. EVALUACIONES/EFICACIA
                        </div>
                        <div class="internal-link" onclick="showInternalTab('eficiencia', this)">5. EFICIENCIA</div>
                        <div class="internal-link" onclick="showInternalTab('resumen', this)">6. EVALUACI√ìN OPERACIONAL
                        </div>
                    </div>

                    <div id="liuntas" class="internal-content">
                        <div class="card">
                            <h3>Paso 1: Configuraci√≥n de Tareas</h3>
                            <div
                                style="background: #eef2f7; padding: 15px; border-radius: 8px; margin-bottom: 15px; border: 1px solid var(--navy);">
                                <label>NOMBRE DE LA OPERACI√ìN / EJERCICIO:</label>
                                <input type="text" id="opName" onchange="saveOpName()" placeholder="Ej. UNITAS LXV">
                                <label style="margin-top:10px; display:block;">MISI√ìN DE LA OPERACI√ìN:</label>
                                <textarea id="opMission" onchange="saveOpMission()" placeholder="Describa la misi√≥n..."
                                    style="width:100%; height:80px; margin-top:5px; border-radius:4px; padding:8px; border:1px solid #ccc;"></textarea>
                                <div id="opStatusBadge" style="margin-top:8px; font-weight:bold;"></div>
                                <button id="btnNewOpTareas" class="btn" onclick="prepareNewOperation()"
                                    style="background:var(--success); margin-top:10px; color:white; font-weight:bold; width:100%;">üÜï
                                    INICIAR NUEVA OPERACI√ìN</button>
                            </div>
                            <div class="grid-form">
                                <input type="hidden" id="editIndexL" value="-1">
                                <input type="hidden" id="editUserIndex" value="-1">
                                <div><label>C√≥digo:</label><input type="text" id="ltCode"></div>
                                <div><label>Descripci√≥n:</label><input type="text" id="ltName"></div>
                                <div><label>Peso (%):</label><input type="number" id="ltWeight"></div>
                                <div style="display:flex; align-items:flex-end;"><button class="btn btn-main"
                                        onclick="saveLIUNTA()">GUARDAR TAREA</button></div>
                            </div>
                            <table id="tblLiuntas">
                                <thead>
                                    <tr>
                                        <th>C√≥digo</th>
                                        <th>Descripci√≥n Tarea</th>
                                        <th>Peso</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>

                    <div id="ejercicios" class="internal-content" style="display:none;">
                        <div class="card">
                            <h3>Paso 2: Vinculaci√≥n de Ejercicios T√°cticos</h3>
                            <div class="grid-form">
                                <input type="hidden" id="editIndexE" value="-1">
                                <div><label>Tarea UNTL:</label><select id="exUntlParent"></select></div>
                                <div><label>Nombre Ejercicio:</label><input type="text" id="exName"></div>
                                <div><label>Peso en Tarea (%):</label><input type="number" id="exWeight"></div>
                                <div style="display:flex; align-items:flex-end;"><button class="btn btn-main"
                                        onclick="saveEjercicio()">VINCULAR</button></div>
                            </div>
                            <table id="tblEjercicios">
                                <thead>
                                    <tr>
                                        <th>C√≥digo UNTL</th>
                                        <th>Nombre de Tarea</th>
                                        <th>Ejercicio Vinculado</th>
                                        <th>Peso</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>

                    <div id="costos" class="internal-content" style="display:none;">
                        <div class="card">
                            <h3>Paso 3: Registro de Costos por Buque</h3>

                            <div class="grid-form">
                                <input type="hidden" id="editCostIndex" value="-1">

                                <div>
                                    <label>Buque:</label>
                                    <select id="costShip"></select>
                                </div>
                                <div><label>√çtem de Gasto:</label><input type="text" id="costItem"
                                        placeholder="Combustible, Munici√≥n, etc."></div>
                                <div><label>Monto (USD):</label><input type="number" id="costValue" placeholder="0.00">
                                </div>

                                <div style="display:flex; align-items:flex-end;">
                                    <button class="btn btn-main" onclick="saveCost()">REGISTRAR COSTO</button>
                                </div>
                            </div>
                            <!-- SECCI√ìN DE TOTALES -->
                            <div
                                style="margin-top: 15px; padding: 15px; background: #e6fffa; border: 1px solid #38b2ac; border-radius: 8px; display: flex; justify-content: space-between; align-items: center;">
                                <h4 style="margin: 0; color: #234e52;">COSTO TOTAL DE LA OPERACI√ìN:</h4>
                                <span id="totalCostDisplay"
                                    style="font-size: 1.5rem; font-weight: bold; color: #2c7a7b;">$0.00</span>
                            </div>

                            <table id="tblCostos">
                                <thead>
                                    <tr>
                                        <th>Buque</th>
                                        <th>√çtem</th>
                                        <th>Monto</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>

                    <div id="eficacia" class="internal-content" style="display:none;">
                        <div class="card">
                            <h3>Paso 4: Evaluaci√≥n y C√°lculo de Eficacia</h3>
                            <div class="grid-form">
                                <input type="hidden" id="editIndexLog" value="-1">
                                <div><label>Buque:</label><select id="evShip"></select></div>
                                <div><label>Ejercicio:</label><select id="evExSelect"></select></div>
                                <div><label>Fecha:</label><input type="date" id="evDate"></div>
                                <div><label>Calificaci√≥n (0-10):</label><input type="number" id="evScore" max="10"
                                        min="0"></div>
                                <div><label>Tiempo Empleado (Horas):</label><input type="number" id="evTime" min="0">
                                </div>
                                <div><label>Observaciones / Novedades:</label><textarea id="evObs"></textarea></div>

                                <div style="display:flex; align-items:flex-end;"><button class="btn btn-main"
                                        onclick="processEvaluation()">GUARDAR EVALUACI√ìN</button></div>
                            </div>


                            <div class="grid-form" style="margin-top:20px;">
                                <div class="card">
                                    <h4>Eficacia por Buque</h4>
                                    <canvas id="chartEficaciaEval"></canvas>
                                </div>
                            </div>

                            <table id="tblLogs">
                                <thead>
                                    <tr>
                                        <th>Buque</th>
                                        <th>Tarea UNTL</th>
                                        <th>Ejercicio</th>
                                        <th>Nota</th>
                                        <th>Horas</th>
                                        <th>Novedades</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>

                    <div id="eficiencia" class="internal-content" style="display:none;">
                        <div class="card">
                            <h3>Paso 5: C√°lculo de Eficiencia Operativa</h3>
                            <p>An√°lisis combinado de Eficacia vs Recursos (Tiempo y Costo).</p>

                            <div style="display: flex; flex-direction: column; gap: 20px;">
                                <div>
                                    <table id="tblEficienciaBuques">
                                        <thead>
                                            <tr>
                                                <th>Buque</th>
                                                <th>Eficacia (%)</th>
                                                <th>Costo Total</th>
                                                <th>Tiempo Total</th>
                                                <th>Eficiencia</th>
                                                <th>Estado</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                                <div class="card" style="max-width: 800px; margin: 0 auto; width: 100%;">
                                    <h4 style="text-align: center;">Comparativa de Eficiencia</h4>
                                    <canvas id="chartEficacia"></canvas>
                                </div>
                            </div>

                            <h4>Detalles por Buque</h4>
                            <div id="detallesBuques" style="margin-top: 20px;"></div>

                        </div>
                    </div>


                    <div id="resumen" class="internal-content" style="display:none;">
                        <div class="card">
                            <h3>Paso 6: Evaluaci√≥n Operacional Consolidada</h3>
                            <div style="margin-bottom:20px; text-align:right;">
                                <label>Seleccionar Operaci√≥n para Resumen:</label>
                                <select id="resumenOpSelector" onchange="renderResumen()"
                                    style="width:200px; display:inline-block;"></select>
                            </div>

                            <div
                                style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; text-align: center;">
                                <div
                                    style="padding: 20px; background: #ebf8ff; border-radius: 10px; border: 1px solid #bee3f8;">
                                    <h4 style="margin:0; color: #2b6cb0;">EFICACIA GLOBAL</h4>
                                    <div id="resumenGlobalLabel"
                                        style="font-size: 3rem; font-weight: bold; color: #2c5282;">0%</div>
                                    <div id="resumenStatusBox" class="status-badge" style="margin-top: 5px;">-</div>
                                </div>

                                <div
                                    style="padding: 20px; background: #f0fff4; border-radius: 10px; border: 1px solid #c6f6d5;">
                                    <h4 style="margin:0; color: #276749;">EFICIENCIA GLOBAL</h4>
                                    <div id="resumenEficienciaGlobalLabel"
                                        style="font-size: 3rem; font-weight: bold; color: #22543d;">0%</div>
                                    <div id="resumenEficienciaStatusBox" class="status-badge" style="margin-top: 5px;">-
                                    </div>
                                </div>

                                <div
                                    style="padding: 20px; background: #fffaf0; border-radius: 10px; border: 1px solid #feebc8; display:flex; flex-direction:column; justify-content:center;">
                                    <button class="btn btn-pdf" onclick="generateReportGlobal()">üìÑ REPORTE GLOBAL DE
                                        OPERACI√ìN</button>
                                    <button class="btn btn-pdf" onclick="generateReportPerShip()"
                                        style="background:var(--slate); margin-top:10px;">üö¢ REFERENCIA POR
                                        BUQUES</button>
                                    <button class="btn btn-pdf" onclick="closeOperation()"
                                        style="background:var(--danger); margin-top:20px;">üîí CERRAR OPERACI√ìN</button>
                                    <button id="btnNewOp" class="btn" onclick="prepareNewOperation()"
                                        style="background:var(--success); margin-top:10px; display:none; color:white; font-weight:bold;">üÜï
                                        NUEVA OPERACI√ìN</button>
                                </div>
                            </div>

                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 30px;">
                                <div>
                                    <h4>Comparativa de Eficacia</h4>
                                    <canvas id="chartResumenEficacia"></canvas>
                                </div>
                                <div>
                                    <h4>Comparativa de Eficiencia</h4>
                                    <canvas id="chartResumenEficiencia"></canvas>
                                </div>
                            </div>

                        </div>
                    </div>


                </div>

                <!-- ================= VISTAS DE NIVEL OPERACIONAL ================= -->

                <div id="operacional-superficie" class="tab-content">
                    <h2 style="color: var(--navy); border-bottom: 2px solid var(--gold); padding-bottom: 10px;">
                        VISUALIZACI√ìN MANDO OPERACIONAL</h2>
                    <div style="display: grid; grid-template-columns: 1.5fr 1fr; gap: 20px; margin-top: 20px;">
                        <div class="card">
                            <h4>Resultados por Buques</h4>
                            <canvas id="opChart" style="max-height: 400px;"></canvas>
                        </div>
                        <div class="card"
                            style="display: flex; flex-direction: column; justify-content: center; align-items: center;">
                            <h4 style="margin:0">ALISTAMIENTO GLOBAL</h4>
                            <div id="opGlobalLabel" style="font-size: 4.5rem; font-weight: 900; color: var(--navy);">0%
                            </div>
                            <div id="opStatusBox" class="status-badge" style="width: 85%;">CALCULANDO...</div>
                            <button class="btn btn-pdf" style="margin-top: 25px;" onclick="generatePDF()">üì• DESCARGAR
                                REPORTE MANDO</button>
                        </div>
                    </div>
                </div>

                <div id="operacional-resumen" class="tab-content">
                    <h2 style="color: var(--navy); border-bottom: 2px solid var(--gold); padding-bottom: 10px;">RESUMEN
                        INTEGRAL DE FUERZAS</h2>

                    <div class="card">
                        <div
                            style="display: flex; flex-wrap: wrap; gap: 15px; align-items: center; justify-content: space-between;">
                            <div style="display:flex; gap: 5px; flex-wrap: wrap;">
                                <button class="btn btn-main" style="width:auto;" id="btn-force-superficie"
                                    onclick="setResumenForce('superficie')">SUPERFICIE</button>
                                <button class="btn" style="width:auto; background: #e2e8f0; color: #4a5568;"
                                    id="btn-force-submarinos"
                                    onclick="setResumenForce('submarinos')">SUBMARINOS</button>
                                <button class="btn" style="width:auto; background: #e2e8f0; color: #4a5568;"
                                    id="btn-force-aviacion" onclick="setResumenForce('aviacion')">AVIACI√ìN</button>
                                <button class="btn" style="width:auto; background: #e2e8f0; color: #4a5568;"
                                    id="btn-force-infanteria"
                                    onclick="setResumenForce('infanteria')">INFANTER√çA</button>
                                <button class="btn" style="width:auto; background: #e2e8f0; color: #4a5568;"
                                    id="btn-force-guardacostas"
                                    onclick="setResumenForce('guardacostas')">GUARDACOSTAS</button>
                            </div>

                            <div style="display:flex; gap: 10px; align-items: center;">
                                <label style="margin:0; font-weight:bold;">OPERACI√ìN:</label>
                                <select id="integralOpSelector" onchange="renderOperationalSummary()"
                                    style="padding: 10px; border-radius: 5px;">
                                </select>

                                <label style="margin:0; font-weight:bold; margin-left:10px;">VISTA:</label>
                                <select id="resumenLevelSelector" onchange="renderOperationalSummary()"
                                    style="padding: 10px; border-radius: 5px;">
                                    <option value="units">POR UNIDADES</option>
                                    <option value="global">GLOBAL POR FUERZA</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div id="resumenDashboardContent">
                        <!-- METRICS -->
                        <div
                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px;">
                            <div class="card" style="text-align: center; border-left: 5px solid var(--info);">
                                <h3 style="margin:0; font-size: 1rem; color: #718096;">EFICACIA PROMEDIO</h3>
                                <div id="resumenForceEficacia"
                                    style="font-size: 2.5rem; font-weight: bold; color: var(--navy);">0%</div>
                            </div>
                            <div class="card" style="text-align: center; border-left: 5px solid var(--success);">
                                <h3 style="margin:0; font-size: 1rem; color: #718096;">EFICIENCIA PROMEDIO</h3>
                                <div id="resumenForceEficiencia"
                                    style="font-size: 2.5rem; font-weight: bold; color: var(--navy);">0%</div>
                            </div>
                            <div class="card" style="text-align: center; border-left: 5px solid var(--warning);">
                                <h3 style="margin:0; font-size: 1rem; color: #718096;">UNIDADES EVALUADAS</h3>
                                <div id="resumenForceCount"
                                    style="font-size: 2.5rem; font-weight: bold; color: var(--navy);">0</div>
                            </div>
                        </div>

                        <!-- CHARTS AREA -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div class="card">
                                <h4>Eficacia por Unidad</h4>
                                <canvas id="chartResumenForceEficacia"></canvas>
                            </div>
                            <div class="card">
                                <h4>Eficiencia por Unidad</h4>
                                <canvas id="chartResumenForceEficiencia"></canvas>
                            </div>
                        </div>

                        <!-- TABLE AREA -->
                        <div class="card" style="margin-top: 20px;">
                            <h4>Detalle de Unidades</h4>
                            <table id="tblResumenForce">
                                <thead>
                                    <tr>
                                        <th>Unidad</th>
                                        <th>Eficacia (%)</th>
                                        <th>Eficiencia (%)</th>
                                        <th>Estado</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>

                    </div>
                </div>

                <div id="vacio" class="tab-content">
                    <div class="card">
                        <h2>Secci√≥n en Desarrollo</h2>
                        <p>Pendiente su desarrollo...</p>
                    </div>
                </div>

                <div id="creditos" class="tab-content">
                    <div class="card authorship-card">
                        <div class="authorship-header">
                            <h2 style="color: var(--navy); margin-bottom: 5px;">SISTEMA DE EVALUACI√ìN OPERACIONAL</h2>
                            <p style="font-weight: bold; color: var(--gold); letter-spacing: 1px;">ARMADA DEL ECUADOR
                            </p>
                        </div>

                        <div class="authorship-body">
                            <div class="author-info">
                                <h3>DESARROLLO Y AUTOR√çA</h3>
                                <p class="author-name">CPCB-SU CARLOS VALLEJO ORTEGA</p>
                                <p class="author-title">Desarrollador del Sistema de Evaluaci√≥n Operacional</p>
                            </div>

                            <hr style="border: 0; border-top: 1px solid #e2e8f0; margin: 25px 0;">

                            <div class="credits-grid">
                                <div class="credit-item">
                                    <strong>Versi√≥n:</strong>
                                    <span>1.0.0 (Feb 2026)</span>
                                </div>
                                <div class="credit-item">
                                    <strong>Instituci√≥n:</strong>
                                    <span>ARMADA DEL ECUADOR</span>
                                </div>
                                <div class="credit-item">
                                    <strong>Reparto:</strong>
                                    <span>Comandancia de la Escuadra</span>
                                </div>
                            </div>
                        </div>

                        <div class="authorship-footer">
                            <p>¬© 2026 Reservados todos los derechos del autor</p>
                        </div>
                    </div>
                </div>


                <div id="admin-datos" class="tab-content">
                    <h2 style="color: var(--navy);">GESTI√ìN DE BASE DE DATOS CODESC</h2>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div class="card">
                            <h3>Exportar Datos</h3>
                            <p>Descarga un respaldo completo para usar en otro equipo.</p>
                            <button class="btn btn-main" onclick="exportDB()">DESCARGAR RESPALDO (.JSON)</button>
                        </div>
                        <div class="card">
                            <h3>Importar Datos</h3>
                            <p>Carga un archivo de respaldo previo.</p>
                            <input type="file" id="importFile" accept=".json">
                            <button class="btn btn-main" style="margin-top:10px; background:var(--success);"
                                onclick="importDB()">CARGAR RESPALDO</button>
                        </div>
                    </div>
                    <div class="card" style="margin-top: 20px; border-left: 5px solid var(--navy);">
                        <h3>üóÇÔ∏è Reportes Hist√≥ricos de Operaciones</h3>
                        <p>Visualice los resultados de operaciones cerradas y el consolidado hist√≥rico.</p>

                        <!-- Force Selector for History -->
                        <div
                            style="display:flex; flex-wrap:wrap; gap:5px; margin-bottom:15px; border-bottom:1px solid #e2e8f0; padding-bottom:15px;">
                            <label style="width:100%; font-weight:bold; color:var(--navy);">Filtrar por Fuerza:</label>
                            <button class="btn btn-main" style="width:auto; padding:5px 15px;" id="btn-hist-superficie"
                                onclick="setHistoryForce('superficie')">SUPERFICIE</button>
                            <button class="btn" style="width:auto; padding:5px 15px; background:#edf2f7; color:#4a5568;"
                                id="btn-hist-submarinos" onclick="setHistoryForce('submarinos')">SUBMARINOS</button>
                            <button class="btn" style="width:auto; padding:5px 15px; background:#edf2f7; color:#4a5568;"
                                id="btn-hist-aviacion" onclick="setHistoryForce('aviacion')">AVIACI√ìN</button>
                            <button class="btn" style="width:auto; padding:5px 15px; background:#edf2f7; color:#4a5568;"
                                id="btn-hist-infanteria" onclick="setHistoryForce('infanteria')">INFANTER√çA</button>
                            <button class="btn" style="width:auto; padding:5px 15px; background:#edf2f7; color:#4a5568;"
                                id="btn-hist-guardacostas"
                                onclick="setHistoryForce('guardacostas')">GUARDACOSTAS</button>
                        </div>

                        <div style="display:flex; gap:10px; align-items:flex-end; margin-bottom: 20px;">
                            <div style="flex-grow:1;">
                                <label>Seleccionar Reporte:</label>
                                <select id="historyOpSelector" onchange="renderHistoricalReport()">
                                    <option value="">-- Seleccione --</option>
                                </select>
                            </div>
                            <button class="btn btn-main" onclick="printHistoricalReport()">üñ®Ô∏è IMPRIMIR REPORTE</button>
                        </div>

                        <div id="historyReportContainer"
                            style="padding: 15px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; min-height: 200px;">
                            <div style="text-align:center; color: #718096; margin-top: 50px;">Seleccione una opci√≥n para
                                ver los datos.</div>
                        </div>
                    </div>

                    <div class="card" style="border-top: 4px solid var(--danger);">
                        <h3 style="color: var(--danger);">Zona de Peligro</h3>
                        <button class="btn btn-danger" onclick="resetSystem()">BORRAR TODOS LOS DATOS DEL
                            SISTEMA</button>
                    </div>
                </div>


            </div>


            <div id="admin-usuarios" class="tab-content">
                <h2>ADMINISTRACI√ìN DE USUARIOS</h2>

                <div class="card">
                    <div class="grid-form">
                        <input type="hidden" id="editUserIndex" value="-1">

                        <div><label>Usuario</label><input id="newUser"></div>
                        <div><label>Clave</label><input id="newPass"></div>
                        <div>
                            <label>Rol</label>
                            <select id="newRole">
                                <option value="evaluador">Evaluador</option>
                                <option value="mando">Mando</option>
                                <option value="lectura">Lectura</option>
                                <option value="admin">Administrador</option>
                            </select>
                        </div>
                        <div style="display:flex;align-items:flex-end;">
                            <button class="btn btn-main" onclick="addUser()">CREAR USUARIO</button>
                        </div>
                    </div>

                    <table>
                        <thead>
                            <tr>
                                <th>Usuario</th>
                                <th>Rol</th>
                                <th>Fecha</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="tblUsers"></tbody>
                    </table>
                </div>
            </div>

            <div id="admin-buques" class="tab-content">
                <h2>GESTI√ìN DE BUQUES</h2>

                <div class="card">
                    <div class="grid-form">
                        <input type="hidden" id="editShipIndex" value="-1">
                        <div><label>Nombre del Buque</label><input id="newShip"></div>
                        <div style="display:flex;align-items:flex-end;">
                            <button class="btn btn-main" onclick="addShip()">AGREGAR</button>
                        </div>
                    </div>

                    <table>
                        <thead>
                            <tr>
                                <th>Buque</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="tblShips"></tbody>
                    </table>
                </div>
            </div>

            <div id="admin-bitacora" class="tab-content">
                <h2>BIT√ÅCORA DE USO DEL SISTEMA</h2>

                <div class="card">
                    <table>
                        <thead>
                            <tr>
                                <th>Usuario</th>
                                <th>Rol</th>
                                <th>Acci√≥n</th>
                                <th>Fecha</th>
                            </tr>
                        </thead>
                        <tbody id="tblAudit"></tbody>
                    </table>
                </div>
            </div>

        </div>

    </div>

    <script src="script.js"></script>
</body>

</html>
</html>
